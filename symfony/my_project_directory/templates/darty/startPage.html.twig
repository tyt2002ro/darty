<!DOCTYPE html>
<html lang="en">

<link href="{{ asset('css/game.css') }}" rel="stylesheet">
<style>
    .order {
        max-width: 15px;
    }

    tr {
        vertical-align: top
    }
</style>

<head>
    <title>Welcome</title>
</head>
<body>
<form method="POST" action="/createGame" id="form1">
    <table>
        <caption></caption>
        <tr>
            <th>Game Type</th>
            <th>Players/Order</th>
            <th>Game-End-Option</th>
        </tr>
        <tr>
            <td>
                {#                <h1>Game Type</h1> #}
                <ul>
                    {% if games|length > 0 %}
                        {% for game in games %}
                            <label for="{{ game.type|e }}">
                                <input type="radio" id="{{ game.type|e }}" name="games"
                                       value="{{ game.type|e }}" {% if game.checked %} checked="checked"{% endif %}>
                                {{ game.type|e }}
                            </label><br>
                        {% endfor %}
                    {% endif %}
                </ul>
            </td>
            <td>
                {#                <h1>Players</h1> #}
                <ul>
                    <table>
                        {% if players|length > 0 %}
                            {% for player in players %}
                                <tr>
                                    <td>
                                        <input type="checkbox" id="{{ player.firstname|e }} {{ player.lastname|e }}"
                                               name="player[]"
                                               value="{{ player.id|e }}">
                                        <label for="{{ player.firstname|e }} {{ player.lastname|e }}">
                                            {{ player.firstname|e }} {{ player.lastname|e }}</label>
                                    </td>
                                    <td>
                                        <input type="text" id="{{ player.id }}" name="order[{{ player.id }}]" class="order">
                                    </td>
                                </tr>
                            {% endfor %}
                        {% endif %}
                    </table>
                </ul>
            </td>
            <td>
                {#                <h1>Game-End-Option</h1> #}
                <ul>
                    {% if gameEnds|length > 0 %}
                        {% for game in gameEnds %}
                            <label for="{{ game.type|e }}">
                                <input type="radio" id="{{ game.type|e }}" name="gameEnds"
                                       value="{{ game.type|e }}" {% if game.checked %} checked="checked"{% endif %}>
                                {{ game.type|e }}
                            </label><br>
                        {% endfor %}
                    {% endif %}
                </ul>
            </td>
        </tr>
        <tr>
            <td>
                <button type="submit" form="form1" value="Submit" onclick="return areSelectedPlayers();">
                    Start new game
                </button>
            </td>
            <td>
                <button type="button" id="new_player" onclick="location.href='/addPlayerForm'">
                    Add player to database
                </button>
            </td>
            <td>
                <button type="button" id="edit_players" onclick="location.href ='/player-management'">
                    Edit Players
                </button>
            </td>
        </tr>
    </table>
</form>
<script>
    function areSelectedPlayers() {
        var checkboxes = 0;
        var cbs = document.getElementsByTagName('input');
        for (var i = 0; i < cbs.length; i++) {
            if (cbs[i].type === 'checkbox' && cbs[i].name === 'player[]' && cbs[i].checked) {
                checkboxes++;
            }
        }

        if (checkboxes < 2) {
            alert('Please select at least 2 players before you start the game');
            return false;
        }

        return true;
    }
</script>
</body>
</html>